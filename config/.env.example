# Pandora's Box - Environment Configuration
# Copy this to .env and fill in your values

# Database Configuration
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0

DB_HOST=localhost
DB_PORT=5432
DB_NAME=pandoras_box
DB_USER=postgres
DB_PASSWORD=your_password_here

# API Configuration
API_HOST=0.0.0.0
API_PORT=8000

# Security (for production)
SECRET_KEY=change_this_to_random_string
ALLOWED_ORIGINS=*

# Logging
LOG_LEVEL=INFO

# Discord alerting (optional)
# Used by anomaly/watchdog alerts, including DB volume guardrail alerts
DISCORD_WEBHOOK_ALERTS=

# FRED API (Federal Reserve Economic Data)
# Get free key at: https://fred.stlouisfed.org/docs/api/api_key.html
FRED_API_KEY=your_fred_api_key_here

# Google Gemini API (for Savita auto-search)
# Get free key at: https://makersuite.google.com/app/apikey
GEMINI_API_KEY=your_gemini_api_key_here

# Price history collector guardrails (Railway DB protection)
ENABLE_PRICE_HISTORY_COLLECTION=false
ENABLE_PRICE_HISTORY_BACKFILL=false
PRICE_HISTORY_DB_WARN_MB=250
PRICE_HISTORY_DB_ABORT_MB=300
PRICE_HISTORY_DB_ALERTS_ENABLED=true
PRICE_HISTORY_DB_ALERT_COOLDOWN_MINUTES=60
PRICE_HISTORY_VACUUM_AFTER_TRIM=false
PRICE_HISTORY_VACUUM_AFTER_TRIM_MIN_DELETES=50000
PRICE_HISTORY_RETENTION_DAILY_DAYS=30
PRICE_HISTORY_RETENTION_INTRADAY_DAYS=2
PRICE_HISTORY_SIGNAL_LOOKBACK_DAYS=14
PRICE_HISTORY_MAX_SIGNAL_TICKERS=80
PRICE_HISTORY_MAX_TICKERS_PER_CYCLE=100
PRICE_HISTORY_MAX_ROWS_PER_CYCLE=20000
PRICE_HISTORY_ENABLE_INTRADAY=false
PRICE_HISTORY_EQUITY_DAILY_PERIOD=3d
PRICE_HISTORY_EQUITY_INTRADAY_PERIOD=1d
PRICE_HISTORY_CRYPTO_DAILY_DAYS=2
PRICE_HISTORY_CRYPTO_INTRADAY_DAYS=1

# Local archive job (run from your PC)
PRICE_HISTORY_ARCHIVE_DIR=data/archives/price_history
PRICE_HISTORY_ARCHIVE_OLDER_THAN_DAYS=2
PRICE_HISTORY_ARCHIVE_BATCH_SIZE=25000
PRICE_HISTORY_ARCHIVE_PURGE=true
